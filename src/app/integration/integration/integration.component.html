<div class="container3 crystal-box">
    <header class="integration-header">
        <h1 class="title">Integration Calculator</h1>
        <p class="subtitle">Calculate integrates with step-by-step solutions</p>
    </header>

    <main class="integration-main">
        <!-- Input Section -->
        <section class="input-section">
            <div class="input-card">
                <h2>Expression Input</h2>
                <div class="input-group">
                    <label for="expression">Function f(x) =</label>
                    <input type="text" id="expression" class="expression-input" [(ngModel)]="functionInput"
                        placeholder="Enter your function (e.g., x^2 + 3*x + 2)" (keyup.enter)="calculateIntegral()" />
                </div>

                <div class="variable-selector">
                    <label for="variable">Variable:</label>
                    <select id="variable" [(ngModel)]="selectedVariable" class="variable-select">
                        <option value="x">x</option>
                        <option value="y">y</option>
                        <option value="z">z</option>
                        <option value="t">t</option>
                    </select>
                </div>

                <div class="function-buttons">
                    <button class="func-btn" *ngFor="let value of functionButtons, let i = index" (click)="appendToInput(value)" >{{functionVisible[i]}}</button>
                </div>

                <div class="basic-buttons">
                    <button class="basic-btn" *ngFor="let value of basicButtons, let i = index" (click)="appendToInput(value)" >{{basicVisible[i]}}</button>
                    <button class="basic-btn clear-btn" (click)="clearInput()">C</button>
                </div>

                <button class="calculate-btn" (click)="calculateIntegral()" [disabled]="!functionInput">
                    <span>Calculate Integral</span>
                    <svg class="btn-icon" viewBox="0 0 24 24">
                        <path
                            d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" />
                    </svg>
                </button>
            </div>
        </section>

        <!-- Results Section -->
        <section class="results-section">
            <div class="result-card">
                <h2>Result</h2>
                <div class="result-display">
                    <div class="result-item">
                        <span class="result-label">Original Function:</span>
                        <span class="result-value">{{ functionInput || 'f(x) = ?' }}</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Integral:</span>
                        <span class="result-value">{{ result || 'f\'(x) = ?' }}</span>
                    </div>
                </div>
            </div>

            <div class="steps-card">
                <h2>Step-by-Step Solution</h2>
                <div class="steps-container">
                    <div *ngIf="steps.length === 0" class="no-steps">
                        <p>Steps will appear here after calculation</p>
                    </div>
                    <div *ngFor="let step of steps; let i = index" class="step-item">
                        <div class="step-number">{{ i + 1 }}</div>
                        <div class="step-content">{{ step }}</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Graphics Section -->
        <section class="graphics-section">
            <div class="graphics-card">
                <h2>Function Visualization</h2>
                <div class="graphics-container">
                    <div class="chart-placeholder">
                        <svg viewBox="0 0 400 300" class="chart-svg">
                            <defs>
                                <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <rect width="400" height="300" fill="url(#gradient)" rx="8" />
                            <text x="200" y="150" text-anchor="middle" fill="white" font-size="16">
                                Function Graph
                            </text>
                        </svg>
                    </div>
                </div>
            </div>
        </section>

        <!-- Information Section -->
        <section class="info-section">
            <div class="info-card">
                <h2>Function Information</h2>
                <div class="info-content">
                    <div class="info-item">
                        <h3>Basic Rules</h3>
                        <ul>
                            <li>Power Rule: d/dx[x^n] = n*x^(n-1)</li>
                            <li>Product Rule: d/dx[uv] = u'v + uv'</li>
                            <li>Chain Rule: d/dx[f(g(x))] = f'(g(x)) * g'(x)</li>
                        </ul>
                    </div>
                    <div class="info-item">
                        <h3>Trigonometric</h3>
                        <ul>
                            <li>d/dx[sin(x)] = cos(x)</li>
                            <li>d/dx[cos(x)] = -sin(x)</li>
                            <li>d/dx[tan(x)] = secÂ²(x)</li>
                        </ul>
                    </div>
                    <div class="info-item">
                        <h3>Exponential & Logarithmic</h3>
                        <ul>
                            <li>d/dx[e^x] = e^x</li>
                            <li>d/dx[ln(x)] = 1/x</li>
                            <li>d/dx[a^x] = a^x * ln(a)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>
</div>